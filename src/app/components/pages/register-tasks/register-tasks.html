<div class="d-flex flex-column vh-100" style="background: linear-gradient(#4e54c8, #8f94fb)">
  <app-navbar />
  <div class="d-flex flex-grow-1 align-items-center justify-content-center">
    <div class="card shadow-lg p-4" style=" border-radius: 20px; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: none">

      <h4 class="text-center mb-3">Task Registration Form</h4>
      <p class="text-center text-muted mb-4">Fill in the fields and add a task to your agenda.</p>
      <hr />

      <div *ngIf="message() != ''" class="alert alert-info alert-dismissible rounded-pill" style="text-align: center;">
        <strong >{{ message() }}</strong>
        <button type="button" class="btn-close" aria-label="Close" (click)="message.set('')"></button>
      </div>

      <form [formGroup]="formCadastro" (ngSubmit)="registerTask()" class="mt-3">

        <div class="mb-3">
          <label for="taskName" class="form-label fw-semibold">Task name</label>
          <input type="text" id="taskName" class="form-control border-0 shadow-sm rounded-pill px-3" formControlName="name" placeholder="Enter task name" required />
          <div class="text-danger small mt-1" *ngIf="formCadastro.get('name')?.touched && formCadastro.get('name')?.invalid">
            The task name is required and must have at least 8 characters.
          </div>
        </div>

        <div class="mb-3">
          <label for="taskDate" class="form-label fw-semibold">Task date</label>
          <input type="date" id="taskDate" class="form-control border-0 shadow-sm rounded-pill px-3" formControlName="date" required />
          <div class="text-danger small mt-1" *ngIf="formCadastro.get('date')?.touched && formCadastro.get('date')?.invalid">
            The task date is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="taskPriority" class="form-label fw-semibold">Task priority</label>
          <select id="taskPriority" class="form-select border-0 shadow-sm rounded-pill px-3" formControlName="priority" required>
            <option value="" hidden>Select an option</option>
            <option value="LOW">Low priority</option>
            <option value="MEDIUM">Medium priority</option>
            <option value="HIGH">High priority</option>
          </select>
          <div class="text-danger small mt-1" *ngIf="formCadastro.get('priority')?.touched && formCadastro.get('priority')?.invalid">
            The task priority is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="taskCategory" class="form-label fw-semibold">Task category</label>
          <select id="taskCategory" class="form-select border-0 shadow-sm rounded-pill px-3" formControlName="categoryId" required>
            <option value="" hidden>Select an option</option>
            <option *ngFor="let item of categories()" value="{{ item.id }}">{{ item.name }}</option>
          </select>
          <div class="text-danger small mt-1" *ngIf="formCadastro.get('categoryId')?.touched && formCadastro.get('categoryId')?.invalid">
            The task category is required.
          </div>
        </div>

        <button type="submit" class="btn w-100 text-white fw-bold rounded-pill py-2 mt-2" [ngClass]="{ 'btn-success': formCadastro.valid, 'btn-secondary': formCadastro.invalid }" [disabled]="formCadastro.invalid" style="background:#4e54c8; border: none;">
          Register task
        </button>
      </form>

    </div>
  </div>
</div>