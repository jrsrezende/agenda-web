<div class="d-flex flex-column vh-100" style="background: linear-gradient(#4e54c8, #8f94fb)">
  <app-navbar />
  <div class="d-flex flex-grow-1 align-items-center justify-content-center">
    <div class="card shadow-lg p-4" style="border-radius: 20px; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: none">

      <h4 class="text-center mb-3">Task Search</h4>
      <p class="text-center text-muted mb-4">Select the desired date range to view the tasks in the schedule.</p>
      <hr />

      <form [formGroup]="formConsulta" (ngSubmit)="searchTasks()" class="mt-3">
        <div class="row g-3">
          <div class="col">
            <input type="date" class="form-control border-0 shadow-sm rounded-pill px-3" formControlName="minDate" />
          </div>
          <div class="col">
            <input type="date" class="form-control border-0 shadow-sm rounded-pill px-3" formControlName="maxDate" />
          </div>
          <div class="col">
            <input type="submit" class="btn w-100 text-white fw-bold rounded-pill py-2" value="Search tasks"[ngClass]="
            {'btn-success': formConsulta.valid, 'btn-secondary': formConsulta.invalid}" [disabled]="formConsulta.invalid" style="background: #4e54c8; border: none;" />
          </div>
        </div>
      </form>

      <table class="table table-striped table-hover mt-4" *ngIf="tasks().length > 0">
        <thead>
          <tr>
            <th>Task name</th>
            <th>Date</th>
            <th>Priority</th>
            <th>Completed</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of tasks()">
            <td>{{ item.name }}</td>
            <td>{{ item.date | date : 'MM/dd/yyyy' }}</td>
            <td>{{ item.priority }}</td>
            <td>
              <div *ngIf="item.finished" class="badge bg-success">YES</div>
              <div *ngIf="!item.finished" class="badge bg-danger">NO</div>
            </td>
            <td>{{ item.categoryName }}</td>
            <td>
              <button class="btn btn-outline-primary btn-sm me-1" (click)="editTask(item)">Edit</button>
              <button class="btn btn-outline-danger btn-sm me-1" (click)="deleteTask(item.id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>
